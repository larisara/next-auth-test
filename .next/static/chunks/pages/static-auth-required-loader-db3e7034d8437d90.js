(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{6258:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/static-auth-required-loader",function(){return n(4682)}])},4682:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return x}});var r=n(8520),i=n.n(r),o=n(5893),a=n(7294),s=n(2984),c=n(7673),u=n(2806),h={container:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}},f=function(){return(0,o.jsx)("div",{style:h.container,children:(0,o.jsx)("h3",{children:"Loading..."})})},l=function(t,e){var n,r=void 0===e?null:e,i=0===(n=r?r.headers.host:window.location.host).indexOf("localhost");return"".concat(i?"http":"https","://").concat(n).concat(t)};function d(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(r,i)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){d(o,r,i,a,s,"next",t)}function s(t){d(o,r,i,a,s,"throw",t)}a(void 0)}))}}var p={content:{padding:32},infoTextContainer:{marginBottom:32}},x=(0,s.withAuthUser)({whenUnauthedBeforeInit:s.AuthAction.SHOW_LOADER,whenUnauthedAfterInit:s.AuthAction.REDIRECT_TO_LOGIN,LoaderComponent:f})((function(){var t=(0,s.useAuthUser)(),e=(0,a.useState)(),n=e[0],r=e[1],h=(0,a.useCallback)(v(i().mark((function e(){var n,r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getIdToken();case 2:return n=e.sent,r=l("/api/example"),e.next=6,fetch(r,{method:"GET",headers:{Authorization:n}});case 6:return o=e.sent,e.next=9,o.json();case 9:if(a=e.sent,o.ok){e.next=13;break}return console.error("Data fetching failed with status ".concat(o.status,": ").concat(JSON.stringify(a))),e.abrupt("return",null);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),[t]);return(0,a.useEffect)((function(){var t=!1;return v(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:n=e.sent,t||r(n?n.favoriteColor:"unknown :(");case 4:case"end":return e.stop()}}),e)})))(),function(){t=!0}}),[h]),(0,o.jsxs)("div",{children:[(0,o.jsx)(c.Z,{email:t.email,signOut:t.signOut}),(0,o.jsxs)("div",{style:p.content,children:[(0,o.jsxs)("div",{style:p.infoTextContainer,children:[(0,o.jsx)("h3",{children:"Example: static + loader"}),(0,o.jsx)("p",{children:"This page requires is static but requires authentication. Before the Firebase client SDK initializes, it shows a loader. After initializing, if the user is not authenticated, it client-side redirects to the login page."}),(0,o.jsxs)("p",{children:["Your favorite color is: ",n]})]}),(0,o.jsx)(u.Z,{})]})]})}))}},function(t){t.O(0,[843,774,888,179],(function(){return e=6258,t(t.s=e);var e}));var e=t.O();_N_E=e}]);